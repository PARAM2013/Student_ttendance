@model Student_Attendance.ViewModels.InstituteViewModel

<div class="form-group mb-3">
    <label asp-for="Name" class="control-label"></label>
    <input asp-for="Name" class="form-control" />
    <span asp-validation-for="Name" class="text-danger"></span>
</div>

<div class="form-group mb-3">
    <label asp-for="ShortName" class="control-label"></label>
    <input asp-for="ShortName" class="form-control" />
    <span asp-validation-for="ShortName" class="text-danger"></span>
</div>

<div class="form-group mb-3">
    <label asp-for="LogoFile" class="control-label">Logo</label>
    <input asp-for="LogoFile" class="form-control" type="file" accept=".jpg,.jpeg,.png" 
           onchange="validateFile(this)" />
    <span asp-validation-for="LogoFile" class="text-danger"></span>
    <div id="fileValidationMessage" class="text-danger"></div>
</div>

<div class="form-group mb-3">
    <label asp-for="Address" class="control-label"></label>
    <textarea asp-for="Address" class="form-control" rows="3"></textarea>
    <span asp-validation-for="Address" class="text-danger"></span>
</div>

<div class="form-group mb-3">
    <label asp-for="Website" class="control-label"></label>
    <input asp-for="Website" class="form-control" />
    <span asp-validation-for="Website" class="text-danger"></span>
</div>

<div class="form-group mb-3">
    <label asp-for="Email" class="control-label"></label>
    <input asp-for="Email" class="form-control" />
    <span asp-validation-for="Email" class="text-danger"></span>
</div>

<div class="form-group mb-3">
    <label asp-for="ContactNo" class="control-label"></label>
    <input asp-for="ContactNo" class="form-control" />
    <span asp-validation-for="ContactNo" class="text-danger"></span>
</div>

@section Scripts {
    <script>
        function validateFile(input) {
            const file = input.files[0];
            const fileValidationMessage = document.getElementById('fileValidationMessage');
            
            if (file) {
                // Check file size (2MB = 2 * 1024 * 1024 bytes)
                if (file.size > 2 * 1024 * 1024) {
                    fileValidationMessage.textContent = 'File size cannot exceed 2MB';
                    input.value = '';
                    return;
                }

                // Check file type
                const allowedTypes = ['.jpg', '.jpeg', '.png'];
                const fileExtension = file.name.toLowerCase().substring(file.name.lastIndexOf('.'));
                if (!allowedTypes.includes(fileExtension)) {
                    fileValidationMessage.textContent = 'Only .jpg, .jpeg and .png files are allowed';
                    input.value = '';
                    return;
                }

                fileValidationMessage.textContent = '';
            }
        }
    </script>
}